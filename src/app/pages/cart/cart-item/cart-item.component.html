<div class="bg-base-100 grid gap-6 rounded px-4 py-6 shadow-sm sm:grid-cols-2">
  <!-- Product Image and Details -->
  <div class="flex gap-4">
    <!-- Product Image -->
    <div class="size-28 shrink-0 overflow-hidden rounded-lg">
      <a [routerLink]="['/products', cartItem().productId]">
        <img
          [src]="cartItem().productPictureUrl"
          [alt]="cartItem().productName"
          class="h-full w-full object-contain"
        />
      </a>
    </div>

    <!-- Product Details -->
    <div class="flex flex-col justify-center gap-4">
      <h3 class="font-semibold sm:text-base">
        {{ cartItem().productName }}
      </h3>

      <h3>
        <p class="flex items-start gap-1 text-xl font-bold transition-colors">
          {{ cartItem().productPrice | dynamicNumber: locale() }}
          <span class="text-base-content/50 text-xs font-semibold">
            {{ "currency.EGP" | translate }}
          </span>
        </p>
      </h3>
    </div>
  </div>

  <!-- Cart Item Actions and Quantity -->
  <div class="flex justify-between sm:flex-col-reverse sm:items-end">
    <!-- Quantity Selector -->
    <div class="flex items-center gap-2">
      <label class="text-base-content/75 text-sm">
        {{ "cart.quantity" | translate }}
      </label>
      <select
        [disabled]="loading()"
        #selectQty
        (change)="updateQuantity()"
        class="select select-sm min-w-16"
      >
        @for (qty of maxOrderQty() | range; track qty) {
          <option [value]="qty" [selected]="qty === cartItem().quantity">
            {{ qty }}
          </option>
        }
      </select>
    </div>

    <!-- Actions -->
    <div class="flex items-center gap-2">
      @if (isAuthenticated()) {
        <button
          [disabled]="loading()"
          (click)="addToWishlist()"
          [class.btn-active]="isFavorite()"
          class="btn btn-outline btn-secondary btn-circle btn-sm"
        >
          @if (isFavorite()) {
            <i class="fa-solid fa-heart"></i>
          } @else {
            <i class="fa-regular fa-heart"></i>
          }
        </button>
      }

      <button
        [disabled]="loading()"
        (click)="removeFromCart()"
        class="btn btn-outline btn-error btn-circle btn-sm"
      >
        <i class="fa-solid fa-trash"></i>
      </button>
    </div>
  </div>
</div>
